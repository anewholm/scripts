<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_01) on Fri Jul 22 11:20:35 EDT 2016 -->
<title>SegmentCache (Mondrian OLAP Engine, version 3.13-SNAPSHOT)</title>
<meta name="date" content="2016-07-22">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="SegmentCache (Mondrian OLAP Engine, version 3.13-SNAPSHOT)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../mondrian/spi/SegmentBody.html" title="interface in mondrian.spi"><span class="strong">Prev Class</span></a></li>
<li><a href="../../mondrian/spi/SegmentCache.SegmentCacheInjector.html" title="class in mondrian.spi"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?mondrian/spi/SegmentCache.html" target="_top">Frames</a></li>
<li><a href="SegmentCache.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">mondrian.spi</div>
<h2 title="Interface SegmentCache" class="title">Interface SegmentCache</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../mondrian/rolap/cache/MemorySegmentCache.html" title="class in mondrian.rolap.cache">MemorySegmentCache</a>, <a href="../../mondrian/rolap/agg/MockSegmentCache.html" title="class in mondrian.rolap.agg">MockSegmentCache</a>, <a href="../../mondrian/rolap/agg/SegmentCacheManager.CompositeSegmentCache.html" title="class in mondrian.rolap.agg">SegmentCacheManager.CompositeSegmentCache</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="strong">SegmentCache</span></pre>
<div class="block">SPI definition of the segments cache.

 <p>Lookups are performed using <a href="../../mondrian/spi/SegmentHeader.html" title="class in mondrian.spi"><code>SegmentHeader</code></a>s and
 <a href="../../mondrian/spi/SegmentBody.html" title="interface in mondrian.spi"><code>SegmentBody</code></a>s. Both are immutable and fully serializable.

 <p>There are a few ways to declare a SegmentCache implementation in
 Mondrian. The first one is to set the
 <a href="../../mondrian/olap/MondrianProperties.html#SegmentCache"><code>MondrianProperties.SegmentCache</code></a> property.

 <p>The second one is to use the Java Services API. This is the preferred
 mean. You will need to create a jar file, accessible through the same
 class loader as Mondrian, and add a file called
 <code>/META-INF/services/mondrian.spi.SegmentCache</code> which contains
 the name of the segment cache implementation to use.

 <p>The third method is to use the <a href="../../mondrian/spi/SegmentCache.SegmentCacheInjector.html" title="class in mondrian.spi"><code>SegmentCache.SegmentCacheInjector</code></a>.
 This is to be used as a last resort, in environments where the
 cache implementation is not part of the same class loader as Mondrian.
 In those cases, Mondrian can't dynamically load the segment cache class.
 The injector serves as an IoC-like service.

 <p>All of the segment caches that Mondrian discovers, throughout all
 of these means of discovery, will be used simultaneously. It is not possible
 to register new segment caches for a previously existing instance
 of a Mondrian server. The caches are scanned and configured when each
 Mondrian instance gets created.

 <p>Implementations are expected to be thread-safe. Mondrian is likely to
 submit multiple requests at the same time, from different threads. It is the
 responsibility of the cache implementation to maintain a consistent
 state.</p>

 <p>Implementations must implement a time-out policy, if needed. Mondrian
 knows that a call to the cache might take a while. (Mondrian uses worker
 threads to call into the cache for precisely that reason.) Left to its
 own devices, Mondrian will wait forever for a call to complete. The cache
 implementation might know that a call to <a href="../../mondrian/spi/SegmentCache.html#get(mondrian.spi.SegmentHeader)"><code>get(mondrian.spi.SegmentHeader)</code></a> that has taken 100
 milliseconds already is probably hung, so it should return null or throw
 an exception. Then Mondrian can get on with its life, and get the segment
 some other way.</p>

 <p>Implementations must provide a default empty constructor.
 Mondrian creates one segment cache instance per Mondrian server.
 There could be more than one Mondrian server running in the same JVM.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>LBoudreau</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Interface and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../mondrian/spi/SegmentCache.SegmentCacheInjector.html" title="class in mondrian.spi">SegmentCache.SegmentCacheInjector</a></strong></code>
<div class="block">The <a href="../../mondrian/spi/SegmentCache.SegmentCacheInjector.html" title="class in mondrian.spi"><code>SegmentCache.SegmentCacheInjector</code></a> is a means to inject
 <a href="../../mondrian/spi/SegmentCache.html" title="interface in mondrian.spi"><code>SegmentCache</code></a> instances directly into Mondrian,
 instead of passing a class name.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../mondrian/spi/SegmentCache.SegmentCacheListener.html" title="interface in mondrian.spi">SegmentCache.SegmentCacheListener</a></strong></code>
<div class="block"><a href="../../mondrian/spi/SegmentCache.SegmentCacheListener.html" title="interface in mondrian.spi"><code>SegmentCache.SegmentCacheListener</code></a> objects are used to listen
 to the state of the cache and be notified of changes to its
 state or its entries.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../mondrian/spi/SegmentCache.html#addListener(mondrian.spi.SegmentCache.SegmentCacheListener)">addListener</a></strong>(<a href="../../mondrian/spi/SegmentCache.SegmentCacheListener.html" title="interface in mondrian.spi">SegmentCache.SegmentCacheListener</a>&nbsp;listener)</code>
<div class="block">Adds a listener to this segment cache implementation.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../mondrian/spi/SegmentBody.html" title="interface in mondrian.spi">SegmentBody</a></code></td>
<td class="colLast"><code><strong><a href="../../mondrian/spi/SegmentCache.html#get(mondrian.spi.SegmentHeader)">get</a></strong>(<a href="../../mondrian/spi/SegmentHeader.html" title="class in mondrian.spi">SegmentHeader</a>&nbsp;header)</code>
<div class="block">Returns a SegmentBody once the
 cache has returned any results, or null if no
 segment corresponding to the header could be found.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://java.sun.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../mondrian/spi/SegmentHeader.html" title="class in mondrian.spi">SegmentHeader</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../mondrian/spi/SegmentCache.html#getSegmentHeaders()">getSegmentHeaders</a></strong>()</code>
<div class="block">Returns a list of all segments present in the cache.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../mondrian/spi/SegmentCache.html#put(mondrian.spi.SegmentHeader, mondrian.spi.SegmentBody)">put</a></strong>(<a href="../../mondrian/spi/SegmentHeader.html" title="class in mondrian.spi">SegmentHeader</a>&nbsp;header,
   <a href="../../mondrian/spi/SegmentBody.html" title="interface in mondrian.spi">SegmentBody</a>&nbsp;body)</code>
<div class="block">Stores a segment data in the cache.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../mondrian/spi/SegmentCache.html#remove(mondrian.spi.SegmentHeader)">remove</a></strong>(<a href="../../mondrian/spi/SegmentHeader.html" title="class in mondrian.spi">SegmentHeader</a>&nbsp;header)</code>
<div class="block">Removes a segment from the cache.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../mondrian/spi/SegmentCache.html#removeListener(mondrian.spi.SegmentCache.SegmentCacheListener)">removeListener</a></strong>(<a href="../../mondrian/spi/SegmentCache.SegmentCacheListener.html" title="interface in mondrian.spi">SegmentCache.SegmentCacheListener</a>&nbsp;listener)</code>
<div class="block">Unregisters a listener from this segment cache implementation.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../mondrian/spi/SegmentCache.html#supportsRichIndex()">supportsRichIndex</a></strong>()</code>
<div class="block">Tells Mondrian whether this segment cache uses the <a href="../../mondrian/spi/SegmentHeader.html" title="class in mondrian.spi"><code>SegmentHeader</code></a>
 objects as an index, thus preserving them in a serialized state, or if
 it uses its identification number only.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../mondrian/spi/SegmentCache.html#tearDown()">tearDown</a></strong>()</code>
<div class="block">Tear down and clean up the cache.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="get(mondrian.spi.SegmentHeader)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre><a href="../../mondrian/spi/SegmentBody.html" title="interface in mondrian.spi">SegmentBody</a>&nbsp;get(<a href="../../mondrian/spi/SegmentHeader.html" title="class in mondrian.spi">SegmentHeader</a>&nbsp;header)</pre>
<div class="block">Returns a SegmentBody once the
 cache has returned any results, or null if no
 segment corresponding to the header could be found.

 <p>Cache implementations are at liberty to 'forget' segments. Therefore
 it is allowable for this method to return null at any time</p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>header</code> - The header of the segment to find.
 Consider this as a key.</dd>
<dt><span class="strong">Returns:</span></dt><dd>A SegmentBody, or <code>null</code>
 if no corresponding segment could be found in cache.</dd></dl>
</li>
</ul>
<a name="getSegmentHeaders()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSegmentHeaders</h4>
<pre><a href="http://java.sun.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../mondrian/spi/SegmentHeader.html" title="class in mondrian.spi">SegmentHeader</a>&gt;&nbsp;getSegmentHeaders()</pre>
<div class="block">Returns a list of all segments present in the cache.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>A List of segment headers describing the
 contents of the cache.</dd></dl>
</li>
</ul>
<a name="put(mondrian.spi.SegmentHeader, mondrian.spi.SegmentBody)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>put</h4>
<pre>boolean&nbsp;put(<a href="../../mondrian/spi/SegmentHeader.html" title="class in mondrian.spi">SegmentHeader</a>&nbsp;header,
          <a href="../../mondrian/spi/SegmentBody.html" title="interface in mondrian.spi">SegmentBody</a>&nbsp;body)</pre>
<div class="block">Stores a segment data in the cache.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>header</code> - The header of the segment.</dd><dd><code>body</code> - The segment body to cache.</dd>
<dt><span class="strong">Returns:</span></dt><dd>Whether the cache write succeeded</dd></dl>
</li>
</ul>
<a name="remove(mondrian.spi.SegmentHeader)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>remove</h4>
<pre>boolean&nbsp;remove(<a href="../../mondrian/spi/SegmentHeader.html" title="class in mondrian.spi">SegmentHeader</a>&nbsp;header)</pre>
<div class="block">Removes a segment from the cache.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>header</code> - The header of the segment we want to remove.</dd>
<dt><span class="strong">Returns:</span></dt><dd>True if the segment was found and removed,
 false otherwise.</dd></dl>
</li>
</ul>
<a name="tearDown()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tearDown</h4>
<pre>void&nbsp;tearDown()</pre>
<div class="block">Tear down and clean up the cache.</div>
</li>
</ul>
<a name="addListener(mondrian.spi.SegmentCache.SegmentCacheListener)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addListener</h4>
<pre>void&nbsp;addListener(<a href="../../mondrian/spi/SegmentCache.SegmentCacheListener.html" title="interface in mondrian.spi">SegmentCache.SegmentCacheListener</a>&nbsp;listener)</pre>
<div class="block">Adds a listener to this segment cache implementation.
 The listener will get notified via
 <a href="../../mondrian/spi/SegmentCache.SegmentCacheListener.SegmentCacheEvent.html" title="interface in mondrian.spi"><code>SegmentCache.SegmentCacheListener.SegmentCacheEvent</code></a> instances.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>listener</code> - The listener to attach to this cache.</dd></dl>
</li>
</ul>
<a name="removeListener(mondrian.spi.SegmentCache.SegmentCacheListener)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeListener</h4>
<pre>void&nbsp;removeListener(<a href="../../mondrian/spi/SegmentCache.SegmentCacheListener.html" title="interface in mondrian.spi">SegmentCache.SegmentCacheListener</a>&nbsp;listener)</pre>
<div class="block">Unregisters a listener from this segment cache implementation.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>listener</code> - The listener to remove.</dd></dl>
</li>
</ul>
<a name="supportsRichIndex()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>supportsRichIndex</h4>
<pre>boolean&nbsp;supportsRichIndex()</pre>
<div class="block">Tells Mondrian whether this segment cache uses the <a href="../../mondrian/spi/SegmentHeader.html" title="class in mondrian.spi"><code>SegmentHeader</code></a>
 objects as an index, thus preserving them in a serialized state, or if
 it uses its identification number only.

 <p>Not using a rich index prevents
 Mondrian from doing partial cache invalidation.</p>

 <p>It is assumed that this method returns fairly quickly, and for a given
 cache always returns the same value.</p></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>Whether this segment cache preserves headers in serialized state</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
<div class="aboutLanguage"><em><a href="http://sourceforge.net/projects/mondrian"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=35302&type=15" width="150" height="40" border="0" alt='Get Mondrian at SourceForge.net. Fast, secure and free Open Source software downloads'></a></em></div>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../mondrian/spi/SegmentBody.html" title="interface in mondrian.spi"><span class="strong">Prev Class</span></a></li>
<li><a href="../../mondrian/spi/SegmentCache.SegmentCacheInjector.html" title="class in mondrian.spi"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?mondrian/spi/SegmentCache.html" target="_top">Frames</a></li>
<li><a href="SegmentCache.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
