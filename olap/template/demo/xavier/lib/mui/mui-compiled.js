var win=window,doc=document,body=doc.body,head=doc.getElementsByTagName("HEAD")[0],version="0.1";function clearBrowserSelection(){doc.selection?doc.selection.clear():win.getSelection&&win.getSelection().removeAllRanges()}
function merge(){var a=arguments[0]||{},b,c=arguments.length,d;2<c?(d=arguments[c-1],iInt(d)?c--:d=merge.MERGE):d=merge.MERGE;var e,f,g;for(b=1;b<c;b++)for(e in g=arguments[b],g)f=g[e],d&merge.DELETE||null===f&&d&merge.DELETE_IF_NULL?delete a[e]:iUnd(a[e])||d&merge.OVERWRITE?a[e]=f:iArr(a[e])&&(iArr(g[e])?a[e]=a[e].concat(g[e]):a[e].push(g[e]));return a}merge.MERGE=0;merge.OVERWRITE=1;merge.DELETE_IF_NULL=2;merge.DELETE=4;
function clone(a,b){b||(b=[]);if(null===a||"object"!==typeof a)return a;var c,d=b.length,e;for(c=0;c<d;c++)if(e=b[c],e.o===a)return e.c;var f;if(iArr(a))for(e=[],b.push({o:a,c:e}),c=0,d=a.length;c<d;c++)e[c]=clone(a[c],b);else for(f in e={},b.push({o:a,c:e}),a)a.hasOwnProperty(f)&&(e[f]=clone(a[f],b));return e}
function adopt(){var a=arguments,b,c=a.length,d,e,f=a[0],g,h;if(f){if(!iFun(f))throw"Destination must be a constructor";g=f.prototype}else f=new function(){},g=f.prototype={};f._supers=[];for(b=1;b<c;b++){d=a[b];if(iFun(d))h=d,d=d.prototype;else if(iObj(d))h=null;else throw"Argument must be a prototype or a constructor.";f._supers.push(h);1===b&&(f._super=h);for(e in d)iUnd(g[e])&&(g[e]=d[e])}return f}function pDec(a){return parseInt(a,10)}function pHex(a){return parseInt(a,16)}
function iFun(a){return"function"===typeof a}function iUnd(a){return"undefined"===typeof a}function iDef(a){return"undefined"!==typeof a}function iNum(a){return"number"===typeof a}function iStr(a){return"string"===typeof a}function iBol(a){return"boolean"===typeof a}function iInt(a){return pDec(a)===a}function iArr(a){return a&&a.constructor===Array}function iDat(a){return a&&a.constructor===Date}function iRxp(a){return a&&a.constructor===RegExp}
function iObj(a){return null!==a&&"object"===typeof a}var IdGenerator;(IdGenerator=function(a){this.prefix=String(a.prefix||"id");this.id=a.id||0;this.increment=a.increment||1}).prototype={getNewId:function(){return this.prefix+(this.id+=this.increment)},getCurrentId:function(){return this.prefix+this.id}};function nws(){var a,b=arguments.length,c=[];for(a=0;a<b;a++)c=c.concat(String(arguments[a]).split(/\s+/g));return c.join(" ")}
function escXml(a){return(a||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}
function ajax(a){var b=XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0"),c;c=a.url;var d;if(a.params)for(d in a.params)c+=(-1===c.indexOf("?")?"?":"&")+d+"="+encodeURIComponent(a.params[d]);c=[a.method||"GET",c,a.async];a.username&&a.password&&c.push(a.username,a.password);b.open.apply(b,c);b.onreadystatechange=function(){switch(this.readyState){case 0:a.aborted(a,this);break;case 4:if(200===b.status){var c,d=b.getResponseHeader("Content-Type");if(d){var e=d.indexOf(";charset=");
-1!==e&&(d.substr(e+9),d=d.substr(0,e))}try{switch(d){case "application/json":c=JSON.parse(b.responseText);break;case "application/javascript":case "text/javascript":c=eval(b.responseText);break;case "application/xml":case "text/xml":c=b.responseXML;break;default:c=b.responseText}a.success(a,this,c)}catch(k){a.failure(a,this,k)}}else a.failure(a,this,{type:"http",status:b.status,message:b.statusText})}};if(a.headers)for(d in a.headers)b.setRequestHeader(d,a.headers[d]);d=null;if(a.data)if(iObj(a.data)){d=
"";for(var e in a.data)d+=e+"="+a.data[e]}else d=a.data;b.send(d);return b}function parseUri(a){var b=parseUri.options;a=b.parser[b.strictMode?"strict":"loose"].exec(a);for(var c={},d=14;d--;)c[b.key[d]]=a[d]||"";c[b.q.name]={};c[b.key[12]].replace(b.q.parser,function(a,d,g){d&&(c[b.q.name][decodeURIComponent(d)]=decodeURIComponent(g))});if(c.isRelative=""===c.protocol)c.path=c.authority,c.authority=c.host="";c.pathComponents=c.path.split("/");return c}
parseUri.options={strictMode:!1,key:"source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};
function eachField(a,b,c){var d,e;c||(c=null);for(d in a)if(e=a[d],!1===b.call(c,a,d,e))return!1;return!0}
function eq(a,b){if(a===b)return!0;var c=typeof a;if(c!==typeof b)return!1;switch(c){case "object":if(null===a)return null===b?!0:!1;if(null===b)return!1;if(iArr(a)){c=a.length;if(c!==b.length)return!1;var d;for(d=0;d<c;d++)if(!eq(a[d],b[d]))return!1}else return iFun(a)||iRxp(a)?String(a)===String(b):eachField(a,function(a,c,d){if(!eq(d,b[c]))return!1});case "number":if(isNaN(a)&&isNaN(b))return!0;default:return a===b}};function truncateDate(a,b){var c=0,d=0,e=1,f=0,g=0,h=0,k=0;switch(b){case "millisecond":k=a.getUTCMilliseconds();case "second":h=a.getUTCSeconds();case "minute":g=a.getUTCMinutes();case "hour":f=a.getUTCHours();case "day":e=a.getUTCDate();case "month":d=a.getUTCMonth();case "year":c=a.getUTCFullYear()}return new Date(Date.UTC(c,d,e,f,g,h,k))}
function dateAdd(a,b){return new Date(Date.UTC(a.getUTCFullYear()+(b.years?b.years:0),a.getUTCMonth()+(b.months?b.months:0),a.getUTCDate()+(b.days?b.days:0),a.getUTCHours()+(b.hours?b.hours:0),a.getUTCMinutes()+(b.minutes?b.minutes:0),a.getUTCSeconds()+(b.seconds?b.seconds:0),a.getUTCMilliseconds()+(b.milliseconds?b.milliseconds:0)))}
var dayName={0:"sunday",1:"monday",2:"tuesday",3:"wednesday",4:"thursday",5:"friday",6:"saturday"},monthNames={0:"januari",1:"februari",2:"march",3:"april",4:"may",5:"june",6:"july",7:"august",8:"september",9:"october",10:"november",11:"december"};
function isoDateTimeString(a){a||(a=new Date);var b,c=a.getFullYear();b=String(a.getMonth()+1);1===b.length&&(b="0"+b);c+="-"+b;b=String(a.getDate());1===b.length&&(b="0"+b);c+="-"+b;b=String(a.getHours());1===b.length&&(b="0"+b);c+="T"+b;b=String(a.getMinutes());1===b.length&&(b="0"+b);return c+(":"+b)+"Z"}function formatDate(a,b){};function iNod(a){return iObj(a)&&iInt(a.nodeType)}function iEmt(a){return iNod(a)&&1===a.nodeType}function iDoc(a){return iNod(a)&&9===a.nodeType}function iDesc(a,b){b=gEl(b);if(!b)return!1;for(a=gEl(a);a&&a.parentNode;){if(a.parentNode===b)return!0;a=a.parentNode}return!1}function gAnc(a,b){for(;a&&a.tagName!==b;)a=a.parentNode;return a}function fEl(a,b){for(;a&&!hCls(a,b);)a=a.parentNode;return a}function gEl(a){iStr(a)&&(a=doc.getElementById(a));return a}
function gEls(a,b,c){return(a=a.getElementsByTagName(b))&&iInt(c)&&c<a.length?a.item(c):a}function cssStr(a){if(iStr(a))return a;if(null===a)return"";if(!iObj(a))throw"Style must be a string or an object";var b,c="";for(b in a)c+=b+": "+a[b]+";";return c}function sAtts(a,b){a=gEl(a);var c,d;for(c in b)d=b[c],iArr(d)?d=d.join(" "):iObj(d)&&(d="style"===c?cssStr(d):d.toString()),a.setAttribute(c,d)}function gAtt(a,b){return gEl(a).getAttribute(b)}
function sAtt(a,b,c){"style"===b&&(c=cssStr(c));gEl(a).setAttribute(b,c)}function rAtt(a,b){gEl(a).removeAttribute(b)}function aCh(a,b){a=gEl(a);a===doc&&(a=body);iArr(b)||(b=[b]);for(var c=0,d=b.length,e;c<d;c++)e=b[c],iNod(e)||(iStr(e)||iNum(e)||iDat(e)||iBol(e)?e=doc.createTextNode(e):iObj(e)&&(e=cEl(e))),a.appendChild(e)}function dCh(a,b){a=gEl(a);var c;if(iFun(b))for(;c=a.lastChild;)b(c)&&a.removeChild(c);else try{a.innerHTML=""}catch(d){for(;c=a.lastChild;)a.removeChild(c)}}
function cEl(a,b,c,d){a=doc.createElement(a);b&&sAtts(a,b);c&&aCh(a,c);d&&aCh(d,a);return a}function dEl(a){a=gEl(a);if(!a||!a.parentNode)return!1;a.parentNode.removeChild(a);return!0}function pos(a,b){try{var c=0,d=0;a=gEl(a);do c+=a.offsetLeft,d+=a.offsetTop;while(a=a.offsetParent);if(b)var e=pos(b),c=c-e.left,d=d-e.top;return{left:c,top:d}}catch(f){debugger}}function hCls(a,b){return(a=gEl(a))?(new RegExp("(^|\\s)"+b+"($|\\s)","g")).test(a.className):!1}
function aCls(a,b){a=gEl(a);if(!a)return!1;(new RegExp("\\b"+b+"\\b","g")).test(a.className)||(a.className+=" "+b)}function rCls(a,b,c){a=gEl(a);if(!a)return!1;iArr(b)&&(b="("+b.join("|")+")");b=a.className.replace(new RegExp("\\b"+b+"\\b","g"),c?c:"");b=b.trim().replace(/\s\s+/g," ");a.className=b}
function getDom(a){if(iNod(a))return a;var b;if(iStr(a)){if(b=gEl(a),!b)throw"Can't find element with id "+a;}else if(iObj(a))if(iFun(a.getDom))b=a.getDom();else throw"Component doesn't implement method getDom()";else throw"Invalid component";return b}
function confCls(){var a,b,c=arguments.length,d=[];for(b=0;b<c;b++)switch(a=arguments[b],typeof a){case "string":d=d.concat(nws(a).split(" "));break;case "object":iArr(a)?d=d.concat(a):null!==a&&(iDef(a.classes)&&(d=d.concat(confCls(a.classes))),iDef(a["class"])&&(d=d.concat(confCls(a["class"]))));break;default:throw"Must be string or object.";}return d}function linkCss(a){gEl(a)||cEl("link",{rel:"stylesheet",type:"text/css",href:a,id:a},null,head)}
function script(a,b){if(!gEl(a)){var c={type:"text/javascript",src:a};"string"===typeof b&&(c.charset=b);cEl("script",c,null,body)}};var _Event;
(_Event=function(a){a||(a=win.event);this.browserEvent=a;return this}).prototype={getType:function(){return this.browserEvent.type},getTarget:function(){if(this.target)return this.target;var a=this.browserEvent;if(a.target)a=a.target;else if(a.srcElement)a=a.srcElement;else return null;3===a.nodeType&&(a=a.parentNode);return a},getButton:function(){if("function"===typeof doc.addEventListener)return this.browserEvent.button;if("function"===typeof doc.attachEvent)switch(this.browserEvent.button){case 1:return 0;case 2:return 2;
case 4:return 1}return null},getKeyCode:function(){return this.browserEvent.keyCode},getShiftKey:function(){return this.browserEvent.shiftKey},getCtrlKey:function(){return this.browserEvent.ctrlKey},getXY:function(){var a=this.browserEvent.touches;return a&&a.length?{x:a[0].clientX,y:a[0].clientY}:{x:this.browserEvent.clientX,y:this.browserEvent.clientY}},preventDefault:function(){this.browserEvent.preventDefault?this.browserEvent.preventDefault():this.browserEvent.returnValue=!1},save:function(){var a=
_Event.prototype,b=new _Event.Saved,c;for(c in a)0===c.indexOf("get")&&iFun(a[c])&&(b[c.substr(3,1).toLowerCase()+c.substr(4)]=this[c]());return b}};(_Event.Saved=function(){}).prototype={destroy:function(){for(var a in this)this.hasOwnProperty(a)&&delete this.p}};(function(){for(var a in _Event.prototype)if(0===a.indexOf("get")&&iFun(_Event.prototype[a])){var b=String(a.substr(3,1).toLowerCase()+a.substr(4));_Event.Saved.prototype[a]=function(){return this[b]}}})();var GlobalEvent=new _Event(null);
_Event.get=function(a){a||(a=win.event);GlobalEvent.browserEvent=a;return GlobalEvent};
function listen(a,b,c,d){var e,f;if(iArr(a))for(f=a.length,e=0;e<f;e++)listen(a[e],b,c,d);else if(iArr(b))for(f=b.length,e=0;e<f;e++)listen(a,b[e],c,d);else if(iArr(c))for(f=c.length,e=0;e<f;e++)listen(a,b,c[e],d);else if(d||(d=win),c&&(a===win||(a=gEl(a))))a.addEventListener?a.addEventListener(b,function(a){c.call(d,_Event.get(a))},!1):a.attachEvent&&a.attachEvent("on"+b,function(){c.call(d,_Event.get(win.event))});else throw"Couldn't listen to this object";}
function unlisten(a,b,c){var d;iFun(a.removeEventListener)?d=a.removeEventListener:iFun(a.detachEvent)&&(d=a.detachEvent);d&&d.call(a,b,c)};var DDHandler;
(DDHandler=function(a){a=merge(a,{node:doc});this.id=a.id?a.id:++DDHandler.id;var b=this;b.listeners=[];b.endDragListeners=null;b.whileDragListeners=null;var c;b.node=c=gEl(a.node);b.mousedown=!1;b.initdrag=!1;!1===a.dragProxy||(b.dragProxy=gEl(a.dragProxy))||(b.dragProxy=cEl("DIV",{"class":"dnd-drag-proxy",id:this.getId()+"-drag-proxy"},null,c));!1===a.dropProxy||(b.dropProxy=gEl(a.dropProxy))||(b.dropProxy=cEl("DIV",{"class":"dnd-drop-proxy",id:this.getId()+"-drop-proxy"},null,c));b.startDragEvent=
null;listen(this.node,"touchstart",function(a){a.preventDefault();b.event=a;b.handleMouseDown(a);return!1},this);listen(this.node,"mousedown",function(a){b.event=a;0===a.getButton()&&b.handleMouseDown(a);return!1},this);listen(this.node,"touchend",function(a){a.preventDefault();b.event=a;b.handleMouseUp(a);return!1},this);listen(this.node,"mouseup",function(a){a.preventDefault();b.event=a;0===a.getButton()&&b.handleMouseUp(a);return!1},this);listen(this.node,["mousemove","touchmove"],function(a){a.preventDefault();
b.event=a;b.handleMouseMove(a);return!1},this)}).prototype={getId:function(){return DDHandler.prefix+this.id},listen:function(a){a.scope||(a.scope=win);this.listeners.push(a)},handleMouseDown:function(a){this.mousedown=!0;this.initdrag||(this.initdrag=!0,this.node.focus(),this.startDrag(a))},handleMouseUp:function(a){this.mousedown&&(this.initdrag&&(this.initdrag=!1,this.endDrag(a)),this.mousedown=!1)},handleMouseMove:function(a){this.mousedown&&(this.initdrag?this.whileDrag(a):(this.initdrag=!0,
this.startDrag(a)))},cancelDrag:function(){this.mouseMoveEvent=this.whileDragListeners=this.endDragListeners=null;var a=this.startDragEvent;a&&(a.destroy(),delete this.startDragEvent)},startDrag:function(a){var b,c=this.listeners,d=c.length,e;this.endDragListeners=[];this.whileDragListeners=[];this.startDragEvent=a.save();for(b=0;b<d;b++)e=c[b],!0===e.startDrag.call(e.scope,a,this)&&(iFun(e.endDrag)&&this.endDragListeners.push(e),iFun(e.whileDrag)&&this.whileDragListeners.push(e));this.endDragListeners.length+
this.whileDragListeners.length||this.cancelDrag()},endDrag:function(a){var b,c,d,e;if(this.startDragEvent){c=this.endDragListeners;e=c.length;for(b=0;b<e;b++)d=c[b],d.endDrag.call(d.scope,a,this);this.cancelDrag();clearBrowserSelection()}},whileDrag:function(a){var b,c,d,e;if(this.startDragEvent){d=this.whileDragListeners;c=d.length;for(b=0;b<c;b++)e=d[b],e.whileDrag.call(e.scope,a,this);clearBrowserSelection()}}};DDHandler.id=0;DDHandler.prefix="dnd";linkCss(muiCssDir+"dnd.css");var Observable;
(Observable=function(a){a&&a.listeners&&this.listen(a.listeners)}).prototype={unlisten:function(a,b,c,d){if(0===arguments.length)this.listeners=null;else{var e=this.listeners;if(e)if(iArr(a)){var f,e=a.length;for(f=0;f<e;f++)if(1===arguments.length){var g=a[f],h=[];iUnd(g.type)||(h.push(g.type),iUnd(g.method)||(h.push(g.method),iDef(g.scope)&&h.push(g.scope),iDef(g.context)&&h.push(g.context),this.unlisten.apply(this,h)))}else this.unlisten(a[f],b,c,d)}else if(iObj(a))if(a.method)this.unlisten(a.type,a.method,
a.scope,a.context);else for(f in c=a.scope,a)"scope"!==f&&(e=a[f],iFun(e)?this.unlisten(f,e,c):iObj(e)&&this.unlisten(f,e.method,e.scope||c,e.context));else if(g=e[a])for(e=g.length,f=0;f<e;f++)h=g[f],h.method===b&&h.scope===(c||win)&&h.context===(d||null)&&g.splice(f,1)}},listen:function(a,b,c,d){if(iArr(a)){var e,f=a.length;for(e=0;e<f;e++)if(1===arguments.length){var g=a[e],h=[];iUnd(g.type)||(h.push(g.type),iUnd(g.method)||(h.push(g.method),iDef(g.scope)&&h.push(g.scope),iDef(g.context)&&h.push(g.context),
this.listen.apply(this,h)))}else this.listen(a[e],b,c,d)}else if(iObj(a))if(a.method)this.listen(a.type,a.method,a.scope,a.context);else for(e in c=a.scope,a)"scope"!==e&&(f=a[e],iFun(f)?this.listen(e,f,c):iObj(f)&&this.listen(e,f.method,f.scope||c,f.context));else(e=this.listeners)||(e=this.listeners={}),(f=e[a])||(f=e[a]=[]),c||(c=win),d||(d=null),f.push({method:b,scope:c,context:d})},fireEvents:function(a){if(arguments.length)!1===a?this.dontFireEvents=!0:delete this.dontFireEvents;else return iDef(this.dontFireEvents)&&
!0===this.dontFireEvents?!1:!0},fireEvent:function(a,b,c){if(!this.dontFireEvents){var d,e,f,g;if(d=this.listeners)if(d=d[a]){e=0;for(f=d.length;e<f;e++)if(g=d[e],(iUnd(c)||c===g.context)&&!1===g.method.call(g.scope,this,a,b))return!1;return!0}}}};var Displayed;
(function(){(Displayed=function(){}).prototype={isHidden:function(){return Displayed.isHidden(this.getDom())},isVisible:function(){return!this.isHidden()},beforeSetDisplayed:function(a){},setDisplayed:function(a){this.beforeSetDisplayed(a);Displayed.setDisplayed(this.getDom(),a);this.afterSetDisplayed(a)},afterSetDisplayed:function(a){},show:function(){this.setDisplayed(!0)},hide:function(){this.setDisplayed(!1)}};Displayed.isHidden=function(a){a=getDom(a);return!a||"none"===a.style.display};Displayed.isVisible=
function(a){return Displayed.isHidden(a)};Displayed.setDisplayed=function(a,b){if(a=getDom(a))a.style.display=b?"":"none"};Displayed.show=function(a){Displayed.setDisplayed(a,!0)};Displayed.hide=function(a){Displayed.setDisplayed(a,!1)}})();var Disabled;
(function(){(Disabled=function(){}).prototype={isDisabled:function(){var a=this.getDom();return Disabled.isDisabled(a)},isEnabled:function(){return!this.isDisabled()},setEnabled:function(a){var b=this.getDom();a?rCls(b,"disabled",""):aCls(b,"disabled")},enable:function(){Disabled.enable(this.getDom())},disable:function(){Disabled.disable(this.getDom())}};Disabled.isDisabled=function(a){return(a=gEl(a))&&hCls(a,"disabled")};Disabled.isEnabled=function(a){return(a=gEl(a))&&!hCls(a,"disabled")};Disabled.setDisabled=
function(a,b){(a=gEl(a))&&(b?aCls(a,"disabled"):rCls(a,"disabled",""))};Disabled.disable=function(a){Disabled.setDisabled(a,!0)};Disabled.enable=function(a){Disabled.setDisabled(a,!1)}})();var Timer;(function(){(Timer=function(a){this.conf=a||{};arguments.callee._super.apply(this,arguments);this.timeout=null}).prototype={isStarted:function(){return null!==this.timeout},start:function(a){var b=this;b.cancel();b.timeout=win.setTimeout(function(){b.expire();b.timeout=null},a||this.conf.delay)},cancel:function(){null!==this.timeout&&(win.clearTimeout(this.timeout),this.timeout=null)},expire:function(){this.fireEvent("expired")}};adopt(Timer,Observable)})();var Spinner;
(function(){(Spinner=function(a){a=this.conf=a||{};this.hideTimer=new Timer({id:"hideTimer",delay:a.delay||Spinner.prototype.delay,listeners:{expired:this._hide,scope:this}});this.showTimer=new Timer({id:"showTimer",delay:a.delay||Spinner.prototype.delay,listeners:{expired:this._show,scope:this}});this.id=a.id?a.id:++Spinner.id;this.useTransitions=iDef(a.useTransitions)?a.useTransitions:Spinner.prototype.useTransitions;Spinner.instances[this.getId()]=this}).prototype={delay:125,useTransitions:!0,getId:function(){return Spinner.prefix+
this.id},getContainer:function(){return gEl(this.conf.container)||body},createDom:function(){var a=confCls(Spinner.prefix,this.conf),b=this.getContainer(),a=cEl("div",{"class":a,id:this.getId()},null,b);this.showTimer.isStarted()||this._hideOrFadeOut();return a},getDom:function(){var a=gEl(this.getId());a||(a=this.createDom());return a},fadeIn:function(){var a=this.getDom();hCls(a,"spinner-fade-in")||(rCls(a,"spinner-fade-out",""),aCls(a,"spinner-fade-in"))},fadeOut:function(){var a=this.getDom();
hCls(a,"spinner-fade-out")||(rCls(a,"spinner-fade-in",""),aCls(a,"spinner-fade-out"))},_showImmediate:function(){Displayed.prototype.show.call(this)},_show:function(){this.hideTimer.isStarted()||this._showOrFadeIn()},_showOrFadeIn:function(){this.useTransitions?this.fadeIn():this._showImmediate()},_hideImmediate:function(){Displayed.prototype.hide.call(this)},_hide:function(){this.showTimer.isStarted()||this._hideOrFadeOut()},_hideOrFadeOut:function(){this.useTransitions?this.fadeOut():this._hideImmediate()},
getDelay:function(a){return typeof a&&iInt(a)?a:a=this.conf.delay||Spinner.prototype.delay},show:function(a){this.showTimer.isStarted()||(this.hideTimer.isStarted()&&this.hideTimer.cancel(),this.showTimer.start(this.getDelay(a)))},hide:function(a){this.hideTimer.isStarted()||(this.showTimer.isStarted()&&this.showTimer.cancel(),this.hideTimer.start(this.getDelay(a)))}};Spinner.id=0;Spinner.prefix="spinner";Spinner.instances={};Spinner.getInstance=function(a){iInt(a)&&(a=Spinner.prefix+a);return Spinner.instances[a]};
Spinner.lookup=function(a){for(var b=new RegExp("^"+Spinner.prefix+"\\d+$","g");a&&!b.test(a.id);)if((a=a.parentNode)===doc)return null;return Spinner.getInstance(a.id)};adopt(Spinner,Displayed);linkCss(muiCssDir+"spinner.css")})();var Dialog;
(function(){(Dialog=function(a){this.conf=a;this.createDom()}).prototype={yesLabel:"Yes",noLabel:"No",cancelLabel:"Cancel",createDom:function(){this.yesButton=cEl("button",{"class":Dialog.prefix+"-button-yes"});listen(this.yesButton,"click",this.yesHandler,this);this.noButton=cEl("button",{"class":Dialog.prefix+"-button-no"});listen(this.noButton,"click",this.noHandler,this);this.cancelButton=cEl("button",{"class":Dialog.prefix+"-button-cancel"});listen(this.cancelButton,"click",this.cancelHandler,this);
this.title=cEl("div",{"class":Dialog.prefix+"-title"});this.body=cEl("div",{"class":Dialog.prefix+"-body"});this.dom=cEl("div",{"class":Dialog.prefix},[this.title,this.body,cEl("div",{"class":Dialog.prefix+"-buttons"},[this.yesButton,this.noButton,this.cancelButton])],body);this.hide()},getDom:function(){this.dom||this.createDom();return this.dom},yesHandler:function(){this._conf.yes&&this._conf.yes.handler&&this._conf.yes.handler.call(this._conf.scope);this.hide()},noHandler:function(){this._conf.no&&
this._conf.no.handler&&this._conf.no.handler.call(this._conf.scope);this.hide()},cancelHandler:function(){this._conf.cancel&&this._conf.cancel.handler&&this._conf.cancel.handler.call(this._conf.scope);this.hide()},show:function(a){a||(a=this.conf);var b=this.getDom();this.title.innerHTML=a.title;this.body.innerHTML=a.message;Dialog._super.prototype.show.call(this,a);this._conf=a;var c=a.yes;c&&(this.yesButton.innerHTML=c.label||this.yesLabel,c.focus&&this.yesButton.focus());Displayed.setDisplayed(this.yesButton,
Boolean(c));if(c=a.no)this.noButton.innerHTML=c.label||this.noLabel,c.focus&&this.noButton.focus();Displayed.setDisplayed(this.noButton,Boolean(c));if(a=a.cancel)this.cancelButton.innerHTML=a.label||this.cancelLabel,a.focus&&this.cancelButton.focus();Displayed.setDisplayed(this.cancelButton,Boolean(a));a=pDec(((window.innerWidth||doc.clientWidth)-b.clientWidth)/2);b.style.left=a+"px";a=pDec((window.innerHeight-b.clientHeight)/2);b.style.top=a+"px"}};Dialog.alert=function(a,b,c,d){Dialog.alertDialog||
(Dialog.alertDialog=new Dialog({yes:{label:"Ok",focus:!0}})).createDom();Dialog.alertDialog.show({title:a,message:b,scope:d,yes:{label:"Ok",focus:!0,handler:c}})};Dialog.confirm=function(a,b,c,d,e){Dialog.confirmDialog||(Dialog.confirmDialog=new Dialog({})).createDom();Dialog.confirmDialog.show({title:a,message:b,scope:e,yes:{label:"Ok",handler:c},cancel:{label:"Cancel",handler:d}})};adopt(Dialog,Displayed);Dialog.prefix="dialog";linkCss(muiCssDir+"dialog.css")})();var Toolbar;
(Toolbar=function(a){a=this.conf=a||{};this.id=a.id?a.id:++Toolbar.id;Toolbar.instances[this.getId()]=this;this.groups={}}).prototype={destroy:function(){this.unlisten();var a=this.getId();dEl(a);delete Toolbar.instances[a]},getId:function(){return Toolbar.prefix+this.id},getContainer:function(){return gEl(this.conf.container)||body},createDom:function(){var a=this.conf,b=this.getContainer(),a=cEl("div",{"class":confCls("toolbar","pentaho-titled-toolbar",!1===a.rounded?"":"pentaho-rounded-panel2-shadowed",!1===
a.shiny?"":"pentaho-shine","pentaho-background",a),id:this.getId()});b&&b.appendChild(a);this.conf.buttons&&this.addButton(this.conf.buttons,a);listen(a,"click",this.clickHandler,this);return a},render:function(){this.createDom()},clickHandler:function(a){a=a.getTarget();if(!hCls(a,"tooltip")&&!hCls(a,"separator")&&(a=ToolbarButton.lookup(a))&&!a.isDisabled()){var b=a.getToggleGroup(),c;if(b){var d=this.getDepressedButtonInToggleGroup(b),e={group:b,oldButton:d,newButton:d===a?null:a};if(!1!==this.fireEvent("beforeToggleGroupStateChanged",
e)){d&&(d.setDepressed(!1),c=d.conf.stateChangeHandler,iFun(c)&&c.call(d.conf.scope||this,d,"stateChanged",e));if(d!==a||1!==this.groupCount(b))a.setDepressed(!0),c=a.conf.stateChangeHandler,iFun(c)&&c.call(a.conf.scope||this,a,"stateChanged",e);this.fireEvent("afterToggleGroupStateChanged",e)}}else a.press(),c=a.conf.pressedHandler,iFun(c)&&c.call(a.conf.scope||this,a,"pressed"),this.fireEvent("buttonPressed",a)}},getDom:function(){var a=gEl(this.getId());a||(a=this.createDom());return a},addGroup:function(a){var b,
c;if(iStr(a))b=a;else if(c=iObj(a))b=a.name;var d=this.getGroup(b);iUnd(d)&&(d=this.groups[b]=c?a:{});iUnd(d.buttons)&&(d.buttons={});return d},eachButton:function(a,b){var c=this.getDom().childNodes,d=c.length,e,f;b||(b=this);for(e=0;e<d;e++)if(f=c[e],f=ToolbarButton.getInstance(f.id),f=a.call(b,f,e),!1===f)return f;return!0},getButtonWithClass:function(a){var b=null;this.eachButton(function(c){if(c.conf["class"]===a)return b=c,!1},this,a);return b},displayButton:function(a,b){var c=this.getButtonWithClass(a);
c&&Displayed.setDisplayed(c,b)},getButtonWithConf:function(a){var b=null;this.eachButton(function(c,d){var e,f=c.conf;for(e in a)if(iUnd(f[e])||f[e]!==a[e])return!0;b=c;return!1},this);return b},groupCount:function(a){var b=0;this.eachButtonInGroup(function(a){b++},this,a);return b},eachButtonInGroup:function(a,b,c){var d=this.groups[c];if(!d)return!0;b||(b=this);var d=d.buttons,e;for(c in d)if(e=d[c],e=a.call(b,e),!1===e)return e;return!0},displayGroup:function(a,b){this.eachButtonInGroup(function(a){Displayed.setDisplayed(a,
b)},this,a)},hideGroup:function(a){this.displayGroup(a,!1)},showGroup:function(a){this.displayGroup(a,!0)},getDepressedButtonInToggleGroup:function(a){if(!this.groups[a])throw"No such group "+a;var b;this.eachButtonInGroup(function(a){if(a.isDepressed())return b=a,!1},this,a);return b},getGroup:function(a){return this.groups[a]},addButton:function(a,b){b||(b=this.getDom());if(iArr(a)){var c,d=a.length;for(c=0;c<d;c++)this.addButton(a[c],b)}else if(iStr(a))cEl("div",{"class":"toolbar-label"},a,b);
else if(a.getDom&&iFun(a.getDom))c=a.getDom(),hCls(c,"toolbar-item")||aCls(c,"toolbar-item"),b.appendChild(c);else if(iNod(a))hCls(a,"toolbar-item")||aCls(a,"toolbar-item"),b.appendChild(a);else{a instanceof ToolbarButton||(a=new ToolbarButton(a));c=a.getDom();b.appendChild(c);if(c=a.getGroup())d=this.getGroup(c),iUnd(d)?d=this.addGroup({name:c,buttons:{}}):iUnd(d.buttons)&&(d.buttons={}),d.buttons[a.getId()]=a;if(c=a.getToggleGroup())d=this.getGroup(c),iUnd(d)?d=this.addGroup({name:c,buttons:{}}):
iUnd(d.buttons)&&(d.buttons={}),d.toggle=!0,d.buttons[a.getId()]=a}}};adopt(Toolbar,Observable);Toolbar.id=0;Toolbar.prefix="toolbar";Toolbar.instances={};Toolbar.getInstance=function(a){iInt(a)&&(a=Toolbar.prefix+a);return Toolbar.instances[a]};Toolbar.lookup=function(a){for(var b=new RegExp("^"+Toolbar.prefix+"\\d+$","g");a&&!b.test(a.id);)if((a=a.parentNode)===doc)return null;return Toolbar.getInstance(a.id)};var ToolbarButton;
(ToolbarButton=function(a){this.conf=a||{};this.id=a.id?a.id:++ToolbarButton.id;this.pressTimeout=a.pressTimeout;iUnd(this.pressTimeout)&&(this.pressTimeout=ToolbarButton.defaultPressTimeout);ToolbarButton.instances[this.getId()]=this}).prototype={getId:function(){return ToolbarButton.prefix+this.id},getToggleGroup:function(){return this.conf.toggleGroup},getGroup:function(){return this.conf.group},createDom:function(){var a=this.conf||{},b=confCls("toolbar-item","toolbar-button","pentaho-titled-toolbar-label",
a);if(this.getToggleGroup()){var c,d=b.length,e,f=!1,g=!1;for(c=0;c<d;c++)switch(e=b[c],e){case "toolbar-toggle-button":f=!0;break;case "toolbar-toggle-button-down":g=!0}f||b.push("toolbar-toggle-button");!0!==this.conf.depressed||g||b.push("toolbar-toggle-button-down")}c=[];a&&a.text&&c.push(a.text);a&&a.tooltip&&c.push(cEl("div",{"class":"tooltip"},a.tooltip));return cEl("div",{"class":b,id:this.getId()},c)},press:function(){var a=this;a.isDisabled()||(a.setDepressed(!0),setTimeout(function(){a.setDepressed(!1)},
a.pressTimeout))},isDepressed:function(){var a=this.getDom();return hCls(a,"toolbar-toggle-button-down")},setDepressed:function(a){var b=this.getDom();rCls(b,"toolbar-toggle-button-down");a&&aCls(b,"toolbar-toggle-button-down")},getDom:function(){var a=gEl(this.getId());a||(a=this.createDom());return a}};ToolbarButton.id=0;ToolbarButton.prefix="toolbar-button";ToolbarButton.instances={};ToolbarButton.getInstance=function(a){iInt(a)&&(a=ToolbarButton.prefix+a);return ToolbarButton.instances[a]};
ToolbarButton.lookup=function(a){for(var b=new RegExp("^"+ToolbarButton.prefix+"\\d+$","g");a&&!b.test(a.id);)if((a=a.parentNode)===doc)return null;return ToolbarButton.getInstance(a.id)};ToolbarButton.defaultPressTimeout=200;adopt(ToolbarButton,Displayed,Disabled);linkCss(muiCssDir+"toolbar.css");var TreeNode;
(TreeNode=function(a){this.conf=a;this.id=a.id?a.id:++TreeNode.id;TreeNode.instances[this.getId()]=this;a.compare&&(this.compare=a.compare);var b=a.parentTreeNode;if(b){iStr(b)&&(b=TreeNode.getInstance(b));if(!(b instanceof TreeNode))throw"Invalid parent treenode";a.insertBefore?b.addTreeNodeBefore(this,a.insertBefore):b.appendTreeNode(this)}else a.parentElement&&(a.insertBefore?this.addToElementBefore(a.parentElement,a.insertBefore):this.appendToElement(gEl(a.parentElement)))}).prototype={getId:function(){return TreeNode.prefix+
":"+this.id},getConf:function(){return this.conf},addToElementBefore:function(a,b){var c=gEl(a),d=this.getDom(),e=getDom(b);c.insertBefore(d,e)},appendToElement:function(a){aCh(a,this.getDom())},addTreeNodeBefore:function(a,b,c){b||(b=this.getDomBody());a=a.getDom();c=getDom(c);try{b.insertBefore(a,c)}catch(d){debugger}},compare:function(a){var b=this.getTitle();a=a.getTitle();return b>a?1:b<a?-1:0},appendTreeNode:function(a,b){a.conf.parentTreeNode=this;var c=null;if(!0===this.conf.sorted&&(this.eachChild(function(b,
e){if(-1===a.compare(b))return c=b,!1},this),c&&c.getDomFromDocument())){this.addTreeNodeBefore(a,b,c);return}aCh(b||this.getDomBody(),a.getDom())},getState:function(){return this.conf.state||TreeNode.states.collapsed},isFlattened:function(){return hCls(this.getDom(),TreeNode.states.flattened)},getCustomClass:function(){return this.conf.customClass},setCustomClass:function(a){this.conf.customClass=a;var b=this.getDomFromDocument();b&&(hCls(b,a)||aCls(b,a))},getTitle:function(){return this.conf.title||
""},setId:function(a){var b=this.getId(),c=this.getDomFromDocument();this.id=a;this.conf.id=a;delete TreeNode.instances[b];a=this.getId();TreeNode.instances[a]=this;c&&(c.id=a)},setTitle:function(a){this.conf.title=a;this.isRendered()&&(this.getDomLabel().innerHTML=a)},isRendered:function(){return null!==this.getDomFromDocument()},getDomFromDocument:function(){return gEl(this.getId())},getDom:function(){var a;(a=this.getDomFromDocument())||(a=this.createDom());return a},getDomHead:function(){return gEls(this.getDom(),
"DIV",0)},getDomLabel:function(){var a=this.getDomHead();return gEls(a,"SPAN",1)},getDomBody:function(){return gEls(this.getDom(),"DIV",1)},toggle:function(){var a=this.getState();switch(a){case TreeNode.states.collapsed:a=TreeNode.states.expanded;break;case TreeNode.states.expanded:a=TreeNode.states.collapsed}this.setState(a)},checkState:function(a,b,c){var d;b=TreeNode.states;for(d in b)if(a===b[d])return!0;return!1},setState:function(a,b,c){if(!this.checkState(a))throw"Illegal state: "+a;var d=
this.getDom();switch(a){case TreeNode.states.collapsed:case TreeNode.states.expanded:case TreeNode.states.leaf:var e=this.getState();rCls(d,"[^\\b\\s]*"+e,"");e=d.className.split(/\s+/);e=this.addClassesForState(e,a);d.className=e.join(" ");this.conf.state=a;break;case TreeNode.states.flattened:aCls(d,TreeNode.states.flattened);break;case TreeNode.states.unflattened:rCls(d,TreeNode.states.flattened,"")}switch(a){case TreeNode.states.collapsed:case TreeNode.states.unflattened:case TreeNode.states.leaf:return;
default:if(this.childrenRendered())return}this.loadChildren(this.getDomBody(),b,c)},expand:function(){this.setState(TreeNode.states.expanded)},collapsed:function(){this.setState(TreeNode.states.collapsed)},childrenRendered:function(){return gEls(this.getDomBody(),"DIV").length},loadChildren:function(a,b,c){var d=this,e=d.conf,f=e.loadChildren,g;a||(a=this.getDomBody());var h=e.sorted;if(f)setTimeout(function(){var a=cEl("IMG",{src:muiImgDir+"ajax-loader-small.gif"},null,d.getDomBody());!1!==e.childrenSorted&&
(e.sorted=!1);f.call(d,function(){e.sorted=h;dEl(a);b&&b.call(c,d)})},0);else if(g=d.conf.children){var k,n=g.length,l;for(k=0;k<n;k++)l=g[k],iObj(l)&&(l instanceof TreeNode||(l=new TreeNode(l)),this.appendTreeNode(l,a))}},createDom:function(){var a=this.getState(),b=this.conf,c=cEl("DIV",{"class":"body"}),d=[this.getTitle()],e={"class":"toggle"};b.icon&&(e.style={"background-image":"url('"+b.icon+"')"});var f=cEl("SPAN",{"class":"label"});f.innerHTML=d;d=[cEl("SPAN",e),f];d=cEl("DIV",{"class":"head"},
d);b.tooltip&&cEl("SPAN",{"class":"tooltip"},b.tooltip,d);d=[d,c];e=confCls(TreeNode.prefix,b);e=this.addClassesForState(e,a);d=cEl("DIV",{id:this.getId(),"class":e},d);a===TreeNode.states.expanded&&b.children&&this.loadChildren(c);return d},addClassesForState:function(a,b){var c=a.length,d,e;for(e=0;e<c;e++)d=a[e],a.push(d+"-"+b);a.push(b);return a},getSaveData:function(){var a=[];this.eachChild(function(b){a.push(b.getSaveData())});return{conf:this.conf,children:a}},eachDescendantDepthFirst:function(a,
b){return!1===this.eachChild(function(c,d){return!1===a.call(b||this,c,d)?!1:c.eachDescendantDepthFirst(a,b)},this)?!1:!0},expandDescendants:function(){this.eachDescendantDepthFirst(function(a,b){a.getState()!==TreeNode.states.expanded&&a.setState(TreeNode.states.expanded)},this)},eachAncestor:function(a,b){for(var c=this,d=0;c=c.getParentTreeNode();)if(!1===a.call(b||this,c,++d))return!1;return!0},expandAncestors:function(){this.eachAncestor(function(a,b){a.getState()!==TreeNode.states.expanded&&
a.setState(TreeNode.states.expanded)})},getParentTreeNode:function(){return this.conf.parentTreeNode},getRootTreeNode:function(){for(var a,b=this;a=b.getParentTreeNode();)b=a;return b},getPreviousSiblingTreeNode:function(){var a=this.getDom().previousSibling;return a?(a=TreeNode.lookup(a))?a.getParentTreeNode()===this.getParentTreeNode()?a:null:null:null},getNextSiblingTreeNode:function(){var a=this.getDom().nextSibling;return a?(a=TreeNode.lookup(a))?a.getParentTreeNode()===this.getParentTreeNode()?
a:null:null:null},getTree:function(){var a=this.getRootTreeNode();return a?a.getDom().parentNode:null},eachChild:function(a,b,c){var d;switch(typeof c){case "function":d=c;break;case "object":d=function(a){return eq(c,a.conf)};break;default:d=function(){return!0}}b||(b=this);var e=this.getDomBody().children,f=e.length,g,h;if(f)for(g=0;g<f;g++){if(h=e[g],h.id&&(h=TreeNode.getInstance(h.id))&&d.call(b,h)&&!1===a.call(b,h,g))return!1}else if(this.conf.children)for(e=this.conf.children,f=e.length,g=0;g<
f;g++)if(h=e[g],d.call(b,h)&&!1===a.call(b,h,g))return!1;return!0},getChildNodeCount:function(){var a=0;this.eachChild(function(){a++});return a},getIndexOfChildNode:function(a){var b=-1;this.eachChild(function(c,d){if(a===c)return b=d,!1},this);return b},getIndexInParentNode:function(){for(var a=-1,b=this;b;)b=b.getPreviousSiblingTreeNode(),a++;return a},removeFromParent:function(a){var b=this.getDom();if(b){var c=b.parentNode;c&&(c.removeChild(b),a||(this.eachChild(function(a,b){a.removeFromParent(!1)},
this),delete TreeNode.instances[this.getId()]))}}};TreeNode.states={collapsed:"collapsed",expanded:"expanded",flattened:"flattened",unflattened:"unflattened",leaf:"leaf"};TreeNode.id=0;TreeNode.prefix="node";TreeNode.instances={};TreeNode.getInstance=function(a){iInt(a)&&(a=TreeNode.prefix+a);return TreeNode.instances[a]};TreeNode.lookup=function(a){for(var b=new RegExp("\\b"+TreeNode.prefix+"\\b","g");a&&!b.test(a.className);)if(a=a.parentNode,!a||a===doc)return null;return TreeNode.getInstance(a.id)};
linkCss(muiCssDir+"treenode.css");var TreeListener;
(function(){(TreeListener=function(a){this.conf=a;this.registerListeners();arguments.callee._super.apply(this,arguments)}).prototype={getContainer:function(){return getDom(this.conf.container)},registerListeners:function(){var a=this.getContainer();listen(a,["click","touchstart"],function(a){var c=a.getTarget(),d=TreeNode.lookup(c);d&&(hCls(c,"toggle")?!1!==this.fireEvent("beforeToggleNode",d)&&(d.toggle(),this.fireEvent("afterToggleNode",d)):this.fireEvent("nodeClicked",{treeNode:d,event:a}))},this);
listen(a,"dblclick",function(a){var c=a.getTarget(),d=TreeNode.lookup(c);d&&(hCls(c,"toggle")||this.fireEvent("nodeDoubleClicked",{treeNode:d,event:a}))},this)}};adopt(TreeListener,Observable)})();var TreeSelection;
(function(){(TreeSelection=function(a){this.conf=a;this.treeListener=a.treeListener||new TreeListener(a);this.treeListener.listen("nodeClicked",this.clickHandler,this);a.listeners&&this.listen(a.listeners);this.selection=[];this.multiple=Boolean(a.multiple)||!1}).prototype={clickHandler:function(a,b,c){a=[];b=c.treeNode;this.multiple||(a[0]=b);this.setSelection(a,c)},isNodeSelected:function(a){return hCls(getDom(a),"selected")},updateSelection:function(a,b){if(a){var c,d=a.length,e,f;for(c=0;c<d;c++)e=
a[0],f=getDom(e),b&&!this.isNodeSelected(e)?aCls(f,"selected"):!b&&this.isNodeSelected(e)&&rCls(f,"selected")}},_setSelection:function(a){this.updateSelection(a.oldSelection,!1);this.updateSelection(a.newSelection,!0);this.selection=a.newSelection},selectionsEquals:function(a,b){if(a&&!b||!a&&b||a.length<b.length||a.length>b.length)return!1;var c,d=a.length,e,f;for(c=0;c<d;c++)if(e=a[c],f=b[c],e!==f)return!1;return!0},setSelection:function(a,b){var c=this.selection;this.selectionsEquals(c,a)||(c=
{oldSelection:c,newSelection:a,data:b},!1!==this.fireEvent("beforeChangeSelection",c)&&(this._setSelection(c),this.fireEvent("selectionChanged",c)))},getSelection:function(){return this.selection}};adopt(TreeSelection,Observable)})();var Highlighter;
(function(){(Highlighter=function(a){a=this.conf=a||{};this.id=a.id?a.id:++Highlighter.id}).prototype={getId:function(){return Highlighter.prefix+this.id},createDom:function(){var a=this.conf||{},b=a.container;(b=gEl(b))||(b=body);a=cEl("div",{"class":confCls(Highlighter.prefix,a),id:this.getId()});b.appendChild(a);return a},getDom:function(){var a=gEl(this.getId());a||(a=this.createDom());return a},render:function(){this.createDom()},sync:function(){var a=this.getDom().style,b=gEl(this.highlightedElement);if(b){a.display=
"";var c=pos(b);a.left=c.left+4+"px";a.top=c.top+4+"px";a.width=b.clientWidth-8+"px";a.height=b.clientHeight-8+"px"}else a.display="none"},highlight:function(a){this.highlightedElement=a;this.sync()}};Highlighter.id=0;Highlighter.prefix="highlighter";adopt(Highlighter,Displayed);linkCss(muiCssDir+"highlighter.css")})();var ContentArea;
(function(){(ContentArea=function(a){a=this.conf=a||{};this.id=a.id?a.id:++ContentArea.id;this.highlighter=a.highlighter||new Highlighter({container:a.container});ContentArea.instances[this.getId()]=this}).prototype={getId:function(){return ContentArea.prefix+this.id},getSelectedPane:function(){return this.selectedPane},setSelectedPane:function(a){var b=this.selectedPane;hCls(a.getDom(),"no-select")||(this.highlighter.highlight(a.getId()),!1!==this.fireEvent("beforeChangeSelection",{oldSelection:b,
newSelection:a})&&(this.selectedPane=a,this.fireEvent("selectionChanged",{oldSelection:b,newSelection:a})))},getHighlighter:function(){return this.highlighter},clickHandler:function(a){a=a.getTarget();(a=ContentPane.lookup(a))&&(hCls(a.getDom(),"contentpane-noselect")||this.setSelectedPane(a))},createDom:function(){var a=this.conf||{},b=a.container;(b=gEl(b))||(b=body);a=cEl("div",{"class":confCls(ContentArea.prefix,a),id:this.getId()});b.appendChild(a);listen(a,"click",this.clickHandler,this);return a},
getDom:function(){var a=gEl(this.getId());a||(a=this.createDom());return a},render:function(){this.createDom()},splitContentPane:function(a,b,c){if(a){var d=a.getDom(),e=d.parentNode,f=d.nextSibling;e.removeChild(d);var g=new ContentPane;b=new SplitPane({firstComponent:"first"===b?a:g,secondComponent:"second"===b?a:g,orientation:c});c=b.getDom();f?e.insertBefore(c,f):e.appendChild(c);if(e=SplitPane.lookup(e))e.getFirstComponent().id===d.id?e.conf.firstComponent=b:e.getSecondComponent().id===d.id&&
(e.conf.secondComponent=b),e.setSplitterPosition(e.getSplitterPosition()+"px");b.setSplitterPosition("50%");this.fireEvent("contentPaneSplit",{contentPane:a,splitPane:b});this.selectedPane&&this.highlighter.sync();b.listen("orientationChanged",this.splitPaneOrientationChanged,this)}},splitPaneOrientationChanged:function(a,b,c){c.splitPane=a;a=a.conf;switch(this.selectedPane){case a.firstComponent:case a.secondComponent:this.highlighter.sync()}this.fireEvent("splitPaneOrientationChanged",c)},setSize:function(a,
b){var c=this.getDom().style;c.w=a;c.h=b}};ContentArea.id=0;ContentArea.prefix="contentarea";ContentArea.instances={};ContentArea.getInstance=function(a){iInt(a)&&(a=ContentArea.prefix+a);return ContentArea.instances[a]};ContentArea.lookup=function(a){for(var b=new RegExp("^"+ContentArea.prefix+"\\d+$","g");a&&!b.test(a.id);)if((a=a.parentNode)===doc)return null;return ContentArea.getInstance(a.id)};adopt(ContentArea,Observable);linkCss(muiCssDir+"contentarea.css")})();var ContentPane;
(function(){(ContentPane=function(a){a=this.conf=a||{};this.id=a.id?a.id:++ContentPane.id;ContentPane.instances[this.getId()]=this}).prototype={getId:function(){return ContentPane.prefix+this.id},getTitleId:function(){return this.getId()+"-title"},createDom:function(){var a=this.conf,b=this.getId(),b=cEl("div",{"class":confCls(ContentPane.prefix,a),id:b,style:a.style||""}),c,d=this.getTitleId();if(a.title||a.toolbar)c=cEl("div",{id:d,"class":"pentaho-titled-toolbar"},a.title,b);a.toolbar&&(this.toolbar=
a.toolbar instanceof Toolbar?a.toolbar:new Toolbar(a.toolbar),this.toolbar.conf.container=c,this.toolbar.createDom());a=a.container;(a=gEl(a))&&a.appendChild(b);return b},getDom:function(){var a=gEl(this.getId());a||(a=this.createDom());return a},setTitle:function(a){this.conf.title=a;a=gEl(this.getTitleId());a.innerHTML=a},render:function(){this.createDom()},clearAll:function(){dCh(this.getDom())},getToolbar:function(){return this.toolbar?this.toolbar:null}};ContentPane.id=0;ContentPane.prefix="contentpane";
ContentPane.instances={};ContentPane.getInstance=function(a){iInt(a)&&(a=ContentPane.prefix+a);return ContentPane.instances[a]};ContentPane.lookup=function(a){for(var b=new RegExp("^"+ContentPane.prefix+"\\d+$","g");a&&!b.test(a.id);)if((a=a.parentNode)===doc)return null;return ContentPane.getInstance(a.id)};linkCss(muiCssDir+"contentpane.css")})();var SplitPane;
(function(){(SplitPane=function(a){a=this.conf=a||{};this.id=a.id?a.id:++SplitPane.id;SplitPane.instances[this.getId()]=this;arguments.callee._super.apply(this,arguments)}).prototype={getId:function(){return SplitPane.prefix+this.id},getSize:function(a){var b;switch(this.getOrientation()){case SplitPane.orientations.vertical:b="clientWidth";break;case SplitPane.orientations.horizontal:b="clientHeight"}var c;switch(typeof a){case "undefined":c=this.getDom();break;case "string":switch(a){case "first":c=this.getFirstComponent();
break;case "second":c=this.getSecondComponent();break;case "splitter":c=this.getSplitter()}break;default:throw"not supported";}return c[b]},getSplitterRatio:function(){var a=this.getSize(),b=this.getSize("splitter"),a=this.getSplitterPosition()/(a-b);isNaN(a)?a=0:0>a?a=0:1<a&&(a=1);return a},getSplitterPosition:function(a,b){a||(a=this.getSplitter());b||(b=b=this.getOrientation());var c;switch(b){case SplitPane.orientations.vertical:c="offsetLeft";break;case SplitPane.orientations.horizontal:c="offsetTop"}return a[c]},
maintainRatio:function(){return iDef(this.conf.maintainRatio)?Boolean(this.conf.maintainRatio):!0},setSplitterPosition:function(a){var b=this.getOrientation(),c=this.getSplitter(),d={oldPosition:this.getSplitterPosition(c,b),newPosition:a};if(!1!==this.fireEvent("beforeSplitterPositionChange",d)){var e,f;switch(b){case SplitPane.orientations.vertical:e="left";f="width";break;case SplitPane.orientations.horizontal:e="top",f="height"}b="";iInt(a)&&/^\w*\d+\w*$/.test(a)&&(b="px");c.style[e]=a+b;var g;
g="offset"+e.charAt(0).toUpperCase()+e.substr(1);a=c[g];c.style[e]=a+"px";b=this.getDom();g="offset"+(f.charAt(0).toUpperCase()+f.substr(1));b=b[g];c=c[g];g=this.getFirstComponent().style;g[f]=a+"px";g=this.getSecondComponent().style;g[f]=b-(a+c)+"px";g[e]=a+c+"px";this.restoreCollapsers();this.fireEvent("splitterPositionChanged",d)}},getOrientation:function(){return this.conf.orientation||SplitPane.orientations.vertical},setOrientation:function(a){var b=this.getOrientation();if(a!=b){if(a!==SplitPane.orientations.vertical&&
a!==SplitPane.orientations.horizontal)throw"Invalid orientation";b={oldOrientation:b,newOrientation:a};if(!1!==this.fireEvent("beforeOrientationChange",b)){var c=this.getSize(),d=this.getSplitterPosition(),e=this.getSplitter().style;e.top="";e.left="";e=this.getFirstComponent().style;e.height="";e.width="";e.top="";e.left="";e=this.getSecondComponent().style;e.height="";e.width="";e.top="";e.left="";rCls(this.getDom(),this.conf.orientation,a);this.conf.orientation=a;this.setSplitterPosition(100*d/
c+"%");this.fireEvent("orientationChanged",b)}}},getFirstComponent:function(){return getDom(this.conf.firstComponent)},getSecondComponent:function(){return getDom(this.conf.secondComponent)},createDom:function(){var a=this.conf,b=SplitPane.prefix+"-component",c,d=this.getFirstComponent();(c=d.parentNode)&&c.removeChild(d);d.className+=" "+b+" "+b+"-first";var e=this.getSecondComponent();(c=e.parentNode)&&c.removeChild(e);e.className+=" "+b+" "+b+"-second";b=cEl("div",{id:this.getFirstCollapserId(),
"class":"splitter-collapser splitter-collapser-first"});c=cEl("div",{id:this.getSecondCollapserId(),"class":"splitter-collapser splitter-collapser-second"});listen(b,"click",this.collapserDomClicked,this);listen(c,"click",this.collapserDomClicked,this);b=cEl("div",{id:this.getSplitterId(),"class":SplitPane.prefix+"-splitter"},[b,c]);d=cEl("div",{id:this.getId(),"class":confCls(SplitPane.prefix,SplitPane.prefix+"-"+this.getOrientation(),a),style:a.style||{}},[d,b,e]);if(e=a.container)e=getDom(e),e.appendChild(d);
a.splitterPosition&&this.setSplitterPosition(a.splitterPosition);return d},collapserDomClicked:function(a){a=a.getTarget();if(hCls(a,"splitter-uncollapser"))this.uncollapse(a);else{var b;hCls(a,"splitter-collapser-first")?b=this.getFirstComponent():hCls(a,"splitter-collapser-second")&&(b=this.getSecondComponent());b&&this.collapse(b)}},collapse:function(a){var b=this.getSplitterPosition(),c=this.getSize();this.uncollapsedSplitterPosition=b/c*100+"%";var d,e;switch(a){case this.getFirstComponent():d=
this.getFirstCollapser();e=this.getSecondCollapser();b=0;break;case this.getSecondComponent():d=this.getSecondCollapser(),e=this.getFirstCollapser(),b=c-this.getSize("splitter")}this.setSplitterPosition(b);aCls(d,"splitter-uncollapser");rCls(e,"splitter-uncollapser")},restoreCollapsers:function(){rCls(this.getFirstCollapser(),"splitter-uncollapser");rCls(this.getSecondCollapser(),"splitter-uncollapser")},uncollapse:function(a){this.setSplitterPosition(this.uncollapsedSplitterPosition)},getSplitterId:function(){return this.getId()+
"-splitter"},getSplitter:function(){return gEl(this.getSplitterId())},getFirstCollapserId:function(){return this.getId()+"-collapser-first"},getFirstCollapser:function(){return gEl(this.getFirstCollapserId())},getSecondCollapserId:function(){return this.getId()+"-collapser-second"},getSecondCollapser:function(){return gEl(this.getSecondCollapserId())},getDom:function(){var a=gEl(this.getId());a||(a=this.createDom());return a},render:function(){this.createDom()}};SplitPane.orientations={horizontal:"horizontal",
vertical:"vertical"};SplitPane.id=0;SplitPane.prefix="splitpane";SplitPane.clobber=cEl("DIV",{id:SplitPane.prefix+"-clobber"},null,body);SplitPane.instances={};SplitPane.getInstance=function(a){iInt(a)&&(a=SplitPane.prefix+a);return SplitPane.instances[a]};SplitPane.lookup=function(a){for(var b=new RegExp("^"+SplitPane.prefix+"\\d+$","g");a&&!b.test(a.id);)if((a=a.parentNode)===doc)return null;return SplitPane.getInstance(a.id)};SplitPane.orientations.vertical="vertical";SplitPane.orientations.horizontal=
"horizontal";SplitPane.listenToDnd=function(a){a.listen({startDrag:function(b,c){var d=b.getTarget();if(!hCls(d,"splitpane-splitter"))return!1;d=SplitPane.lookup(d);if(!d)return console.log("Error: splitter found but corresponding splitpane not found."),!1;var e=d.getOrientation(),f=d.getDom(),g=d.getSplitter(),h=pos(g),k=b.getXY();d.pos=pos(f);var n,l=0,m=d.getFirstComponent(),m=SplitPane.lookup(m);m===d&&(m=null);m&&(m=m.getDom().style);switch(e){case SplitPane.orientations.horizontal:n=f.clientHeight-
g.clientHeight;m&&(l=pDec(m.minHeight));d._extra=k.y-h.top;break;case SplitPane.orientations.vertical:n=f.clientWidth-g.clientWidth,m&&(l=pDec(m.minWidth)),d._extra=k.x-h.left}d.max=n;d.min=l;if(n=ContentArea.lookup(f))n.getSelectedPane()?a.highlighter=n.getHighlighter():a.highlighter=null;e=SplitPane.clobber;e.parentNode&&dEl(e);f.appendChild(SplitPane.clobber);n=pos(f);e=e.style;e.left=n.left+"px";e.top=n.top+"px";e.width=f.clientWidth+"px";e.height=f.clientHeight+"px";a.currentSplitPane=d;return!0},
whileDrag:function(a,c){var d=c.currentSplitPane,e=a.getXY();d.getDom();switch(d.getOrientation()){case SplitPane.orientations.horizontal:e=e.y-d.pos.top;break;case SplitPane.orientations.vertical:e=e.x-d.pos.left;break;default:return}var f=d.min;e<f&&(e=f);f=d.max;e>f&&(e=f);d.setSplitterPosition(e-d._extra+"px");c.highlighter&&c.highlighter.sync()},endDrag:function(b,c){a.currentSplitPane&&(dEl(SplitPane.clobber),a.currentSplitPane=null)}})};adopt(SplitPane,Observable);linkCss(muiCssDir+"splitpane.css")})();var TabPane;
(function(){(TabPane=function(a){a=this.conf=a||{};this.id=a.id?a.id:++TabPane.id;TabPane.instances[this.getId()]=this;this.tabs=[];this.selectedTab=null;a.listeners&&this.listen(a.listeners)}).prototype={getId:function(){return TabPane.prefix+this.id},getTab:function(a){var b=this.tabs;return 0>a||a>=b.length?null:b[a]},getSelectedTab:function(){var a=this.selectedTab;return 0<=a&&a<this.getTabCount()?this.getTab(a):null},eachTab:function(a,b){var c,d,e=this.getTabCount();for(d=0;d<e;d++)if(c=this.getTab(d),
!1===a.call(b||this,c,d))return!1;return!0},getTabIndex:function(a){var b=-1;this.eachTab(function(c,d){if(c===a)return b=d,!1},this);return b},newComponentId:function(){return TabPane.prefix+"-component-"+ ++TabPane.componentId},getDom:function(){var a=gEl(this.getId());return a?a:this.createDom()},getTabButtonIndex:function(a){var b;iStr(a)?b=a:iNod(a)&&(b=a.id);if(!iStr(b))throw"Invalid id";var c=this.tabs,d=c.length,e;for(a=0;a<d;a++)if(e=c[a],e.id===b)return a;return-1},clickHandler:function(a){a=
a.getTarget();var b=fEl(a,"pentaho-tabWidget");b&&(b=this.getTabButtonIndex(b),-1!==b&&(hCls(a,"pentaho-tabWidget-close")?this.closeTab(b):this.setSelectedTab(b)))},createDom:function(){var a=this.conf,b=a.container;(b=gEl(b))||(b=body);var c=cEl("div",{"class":"pentaho-tab-bar"});listen(c,"click",this.clickHandler,this);c=cEl("div",{"class":confCls("pentaho-tab-panel","tabpane",a),id:this.getId()},[c,cEl("div",{"class":confCls("pentaho-tab-deck-panel","tabpane-components",a)})]);b.appendChild(c);
a.tabs&&this.addTab(a.tabs);return c},render:function(){this.createDom()},getTabStrip:function(){return this.getDom().childNodes[0]},getTabContainer:function(){return this.getDom().childNodes[1]},getTabCount:function(){return this.tabs.length},getTabPage:function(a){return(a=this.getTab(a))?gEl(a.componentId):null},setTabSelected:function(a,b){var c=this.tabs;if(this.hasTab(a)){var c=c[a],d=gEl(c.id),e;iDef(c.componentId)&&(e=gEl(c.componentId));switch(b){case !0:aCls(d,"pentaho-tabWidget-selected");
e&&Displayed.show(e);break;case !1:rCls(d,"pentaho-tabWidget-selected"),e&&Displayed.hide(e)}}},hasTab:function(a){return 0<=a&&a<this.tabs.length},setSelectedTab:function(a){"object"===typeof a&&(a=this.getTabIndex(a));if(this.hasTab(a)&&this.selectedTab!==a){var b={newTab:a};this.hasTab(this.selectedTab)&&(b.oldTab=this.selectedTab);!1!==this.fireEvent("beforeSelectTab",b)&&(iInt(this.selectedTab)&&this.setTabSelected(this.selectedTab,!1),iInt(a)&&this.setTabSelected(a,!0),this.selectedTab=a,this.fireEvent("tabSelected",
b))}},closeTab:function(a){var b={oldTab:a};if(!1!==this.fireEvent("beforeCloseTab",b)){a<this.selectedTab?this.selectedTab--:a===this.selectedTab&&(a+1<this.tabs.length?this.setSelectedTab(a+1):0<=a-1?this.setSelectedTab(a-1):this.selectedTab=-1);var c=this.getTab(a);this.tabs.splice(a,1);a=gEl(c.id);a.parentNode.removeChild(a);var d=c.componentId;d&&!0===this.eachTab(function(a,b){return a.componentId===d?!1:!0},this)&&dEl(c.componentId);this.fireEvent("tabClosed",b)}},addTab:function(a){if(a instanceof
Array){var b;for(b=0;b<a.length;b++)this.addTab(a[b])}else{var c=confCls("pentaho-tabWidget",a),d=[];a.text&&d.push(cEl("span",{"class":"pentaho-tabWidgetLabel"},a.text));!0===a.closeable&&d.push(cEl("span",{"class":"pentaho-tabWidget-close"}));a&&a.tooltip&&d.push(cEl("div",{"class":"tooltip"},a.tooltip));var e;iUnd(a.id)?a.id=e=this.newComponentId():e=a.id;c=cEl("div",{"class":c,id:e},d);if(iDef(a.component)){b=getDom(a.component);if(null===b.id||""===b.id)b.id=this.newComponentId();a.componentId=
b.id}d=this.tabs;e=d.length;var f=this.getTabStrip(),g=this.getTabContainer(),h=iUnd(a.index)||a.index>=e?e:a.index;d.splice(h,0,a);h===e?f.appendChild(c):f.insertBefore(c,gEl(d[h+1].id));b&&g.appendChild(b);!0===a.selected?this.setSelectedTab(h):this.setTabSelected(h,!1)}}};adopt(TabPane,Observable);TabPane.componentId=0;TabPane.id=0;TabPane.prefix="tabpane";TabPane.instances={};TabPane.getInstance=function(a){iInt(a)&&(a=TabPane.prefix+a);return TabPane.instances[a]};TabPane.lookup=function(a){for(var b=
new RegExp("^"+TabPane.prefix+"\\d+$","g");a&&!b.test(a.id);)if((a=a.parentNode)===doc)return null;return TabPane.getInstance(a.id)};linkCss(muiCssDir+"tabpane.css")})();if(iUnd(scrollbarWidth)||iUnd(scrollbarHeight)){cEl("div",{id:"_scrollbars1",style:{"background-color":"blue",position:"absolute",overflow:"auto",width:"50px",height:"50px",left:"-50px",top:"-50px"}},cEl("div",{id:"_scrollbars2",style:{"background-color":"red",position:"absolute",left:"0px",top:"0px",width:"100px",height:"100px"}}),body);var _scrollbars1=gEl("_scrollbars1"),scrollbarWidth=_scrollbars1.offsetWidth-_scrollbars1.clientWidth+2,scrollbarHeight=_scrollbars1.offsetHeight-_scrollbars1.clientHeight+
2,scrollbarWidth=Math.max(scrollbarHeight,scrollbarWidth)}var DataGrid;
(function(){(DataGrid=function(a){a=this.conf=a||{};this.id=a.id?a.id:++DataGrid.id;DataGrid.instances[this.getId()]=this;this.rowIndexHeader=a.rowIndexHeader||!0;arguments.callee._super.apply(this,arguments)}).prototype={destroy:function(){this.unlisten();var a=this.getId();delete DataGrid.instances[a];dEl(a)},getId:function(){return DataGrid.prefix+this.id},createDom:function(){var a=this.getId(),b=cEl("div",{"class":"datagrid",id:a});listen(b,"click",this.clickHandler,this);cEl("div",{"class":"datagrid-spacer",
id:a+"-spacer"},null,b);cEl("div",{"class":"datagrid-col-headers",id:a+"-cols"},null,b);cEl("div",{"class":"datagrid-row-headers",id:a+"-rows"},null,b);a=cEl("div",{"class":"datagrid-cells",id:a+"-cells"},null,b);listen(a,"scroll",this.scrollHandler,this);return b},addPositionableRow:function(a,b,c){var d=a.insertRow(c?a.rows.length:0);d.className="positioning-row";for(c=0;c<b;c++)a=d.insertCell(c),a.innerHTML="<div>&#160;</div>",a.style.width="0px";return d},getColumnCount:function(){return this.columns?
this.columns.length:void 0},getColumnIndex:function(a){var b=-1;this.eachColumn(function(c,d){if(d.name===a)return b=c,!1},this);return b},getCellValue:function(a,b){return this.cells[a][b]},setCellValue:function(a,b,c){this.cells[a][b]=c;a=this.getCell(a,b);this.setCellText(a,c)},getColumn:function(a){iStr(a)&&(a=this.getColumnIndex(a));return this.columns[a]},eachColumn:function(a,b){b||(b=this);var c,d,e=this.columns,f=e.length;for(c=0;c<f;c++)if(d=e[c],!1===a.call(b,c,d))return!1;return!0},eachRow:function(a,
b){b||(b=this);var c=this.rows,d=this.cells,e,f=d.length;if(!d||!d.length)return!0;for(e=0;e<f;e++)if(!1===a.call(b,e,c&&c.length<f?c[e]:null,d[e]))return!1;return!0},eachRowHeader:function(a,b){b||(b=this);var c=this.rowHeaders||[],d=c.length,e,f;for(e=0;e<d;e++)f=c[e],a.call(b,e,f)},eachCellRow:function(a,b){b||(b=this);var c=this.cells,d,e=c.length,f;for(d=0;d<e;d++)f=c[d],a.call(b,d,f)},deleteTableRows:function(a){dCh(a)},setColumns:function(a){var b=this.getColumnsTableDom(),c=a.length;this.deleteTableRows(b);
this.addPositionableRow(b,c);var d=b.insertRow(1);this.columns=a;this.eachColumn(function(a,b){b.index=a;b.className||(b.className="th "+confCls(b).join(" "));var c=d.insertCell(a);c.className=b.className;c.innerHTML=escXml(b.label||b.name)},this);this.columnsSet()},setRowHeaders:function(a){this.rowHeaders=a;this.rowHeadersSet()},rowHeadersSet:function(){},columnsSet:function(){},getColumn:function(a){return this.columns[a]},getCellsRow:function(a){var b=this.getCellsTableDom().rows;return++a>=b.length||
1>a?null:b[a]},getCell:function(a,b){var c=this.getCellsRow(a);if(null===c)return null;c=c.cells;return b>=c.length?null:c[b]},clear:function(){this.setData({columns:[],rows:[],cells:[]})},setData:function(a){this.setColumns(a.columns);this.setRowSet(a)},getPositionableRowHTML:function(a){var b,c='<tr class="positioning-row">';for(b=0;b<a;b++)c+="<td><div>&#160;</div></td>";return c+"</tr>"},createRowHeaders:function(a,b){var c,d=this.rowHeaders||[],e=d.length;if(e){var f;c=this.getRowsTableDom();
a+=1;var g=c.insertRow(a),h,k;for(h=0;h<e;h++)f=d[h],k=g.insertCell(h),c="th",!0===f.isAutoRowNum?(f=a,c+=" autorownum"):(f=b[h],iStr(f)&&(f=escXml(f))),k.className=c,cEl("DIV",{},f,k)}},setCellText:function(a,b){a.innerHTML=iStr(b)?0===b.length?"<br/>":escXml(b):null===b||iUnd(b)?"<br/>":String(b)},createCells:function(a,b){var c=this.getCellsTableDom().insertRow(a+1),d,e=this.columns,f=e.length,g,h,k=b.length;for(d=0;d<f;d++)g=e[d],h=c.insertCell(d),h.className="th "+g.className,d>=k||(g=b[d],null===
g||iUnd(g)||this.setCellText(h,g))},setRowSet:function(a){var b=this.rows=a.rows||[];a=this.cells=a.cells||[];var c,d,e=Math.max(b.length,a.length),f=this.rowHeaders,g,h=f.length||0,k=this.columns,n=k.length||0,l="",m="",p,l=this.getPositionableRowHTML(h),m=this.getPositionableRowHTML(n);for(d=0;d<e;d++){p=b[d];l+="<tr>";for(g=0;g<h;g++)l+='<td class="th',c=f[g],!0===c.isAutoRowNum?l+=' autorownum"><div>'+(d+1):(l+='"><div>',c=p[g],null!==c&&iDef(c)&&(iStr(c)&&(c=escXml(c)),l+=c)),l+="</div></td>";
l+="</tr>";p=a[d];m+="<tr>";for(g=0;g<n;g++)c=k[g],m+='<td class="th '+c.className+'">',g<p.length&&(c=p[g],null!==c&&iDef(c)&&(iStr(c)&&(c=escXml(c)),m+=c)),m+="</td>";m+="</tr>"}this.getRowsTableDom().innerHTML=l;this.getCellsTableDom().innerHTML=m;this.doLayout()},resetColumnWidths:function(){var a=this.getColumnsTableDom().rows[0].cells,b,c=a.length,d;for(b=0;b<c;b++)d=a[b],d=d.firstChild,d.style.width="0px"},doLayout:function(){var a=this.getDom(),b=this.getSpacerDom(),c=this.getRowsDom(),d=
this.getRowsTableDom(),e=this.getColumnsDom(),f=this.getColumnsTableDom(),g=this.getCellsDom(),h=this.getCellsTableDom(),k;k=d?d.offsetWidth:0;e.style.top="0px";e.style.height=f.offsetHeight+"px";c.style.left="0px";g.style.left=e.style.left=c.style.width=k+"px";g.style.top=f.offsetHeight+"px";c.style.top=f.offsetHeight-1+"px";k=a.clientHeight;k=k-f.offsetHeight-scrollbarHeight<h.offsetHeight?k-f.offsetHeight:h.clientHeight+scrollbarHeight;c.style.height=g.style.height=k+"px";a=a.clientWidth;a=a-d.offsetWidth-
scrollbarWidth<h.offsetWidth?a-d.offsetWidth:h.clientWidth+scrollbarWidth;e.style.width=g.style.width=a+"px";b.style.width=d.offsetWidth+"px";b.style.height=f.offsetHeight+"px";this.synCellAndColumnWidths()},synCellAndColumnWidths:function(){var a=this.getColumnsTableDom().rows[0];if(a){var a=a.cells,b=this.getCellsTableDom().rows[0].cells,c,d=b.length,e,f,g,h;for(c=0;c<d;c++)e=a[c],g=e.firstChild,f=b[c],h=f.firstChild,e.offsetWidth>f.offsetWidth?h.style.width=e.offsetWidth+"px":e.offsetWidth<f.offsetWidth&&
(g.style.width=f.offsetWidth+"px")}},getSpacerDom:function(){return gEl(this.getId()+"-spacer")},getCellsDom:function(){return gEl(this.getId()+"-cells")},createCellsTable:function(){var a=this.getCellsDom();return cEl("table",{cellpadding:0,cellspacing:0,"class":"datagrid-cells",id:a.id+"-table"},null,a)},getCellsTableDom:function(){var a=gEl(this.getId()+"-cells-table");a||(a=this.createCellsTable());return a},getRowsDom:function(){return gEl(this.getId()+"-rows")},createRowsTable:function(){var a=
this.getRowsDom();return cEl("table",{cellpadding:0,cellspacing:0,"class":"datagrid-row-headers",id:a.id+"-table"},null,a)},getRowsTableDom:function(){var a=gEl(this.getId()+"-rows-table");a||(a=this.createRowsTable());return a},getColumnsDom:function(){return gEl(this.getId()+"-cols")},createColsTable:function(){var a=this.getColumnsDom();return cEl("table",{"class":"datagrid-col-headers",cellpadding:0,cellspacing:0,id:a.id+"-table"},null,a)},getColumnsTableDom:function(){var a=gEl(this.getId()+
"-cols-table");a||(a=this.createColsTable());return a},scrollHandler:function(a){a=this.getCellsDom();var b=this.getRowsDom(),c=this.getColumnsDom();b&&(b.style.top=-a.scrollTop+c.offsetHeight+"px");c.style.left=-a.scrollLeft+b.offsetWidth+"px"},getDom:function(){var a=gEl(this.getId());a||(a=this.createDom());return a},clickHandler:function(a){a=a.getTarget();if("TD"===a.tagName)switch(a.parentNode.parentNode.parentNode.className){case "datagrid-col-headers":this.fireEvent("columnHeaderClicked",
{columnIndex:a.cellIndex,dom:a});break;case "datagrid-row-headers":this.fireEvent("rowHeaderClicked",{rowIndex:a.parentNode.rowIndex-1,dom:a});break;case "datagrid-cells":this.fireEvent("cellClicked",{columnIndex:a.cellIndex,rowIndex:a.parentNode.rowIndex-1,dom:a})}},updateAutoRowNumHeaders:function(a){var b=[];this.eachRowHeader(function(a,c){!0===c.isAutoRowNum&&b.push(a)},this);var c=b.length;if(c)for(var d=this.getRowsTableDom().rows,e=d.length,f,g;a<e;a++)for(f=d[a],g=f.cells,f=0;f<c;f++)g[b[f]].innerHTML=
a},deleteRow:function(a){this.rows&&this.rows.splice(a,1);this.getRowsTableDom().deleteRow(a+1);this.cells.splice(a,1);this.getCellsTableDom().deleteRow(a+1);this.updateAutoRowNumHeaders(a);this.doLayout();this.fireEvent("rowDeleted",{rowIndex:a});return a},insertRow:function(a,b,c){b||(b=[]);this.eachRowHeader(function(a,c){b.length<=a&&b.push(c.defaultValue||"")},this);this.rows&&this.rows.splice(a,0,b);this.createRowHeaders(a,b);c||(c=[],this.eachColumn(function(a,b){c.push(b.defaultValue||"")},
this));this.cells.splice(a,0,c);this.createCells(a,c);this.updateAutoRowNumHeaders(a+2);this.doLayout();this.fireEvent("rowInserted",{rowIndex:a});return a}};adopt(DataGrid,Observable);DataGrid.id=0;DataGrid.prefix="datagrid";DataGrid.instances={};DataGrid.getInstance=function(a){iInt(a)&&(a=DataGrid.prefix+a);return DataGrid.instances[a]};DataGrid.lookup=function(a){for(var b=new RegExp("^"+DataGrid.prefix+"\\d+$","g");a&&!b.test(a.id);)if((a=a.parentNode)===doc)return null;return DataGrid.getInstance(a.id)};
linkCss(muiCssDir+"datagrid.css")})();